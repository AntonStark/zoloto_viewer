<div class="scrollable">
    <div style="position: relative;" id="plan-page-map-container">
        <svg width="{{ page.plan.width }}" height="{{ page.plan.height }}" id="project-page-plan-svg">
            <g id="project-page-svg-origin">
                <image href="{{ page.plan.url }}"
                        {#                   transform="scale(0.977, 0.988)"#}
                       width="{{ page.plan.width }}" height="{{ page.plan.height }}">
                </image>
                <rect id="project-page-svg-background"
                      fill-opacity="0" width="{{ page.plan.width }}" height="{{ page.plan.height }}">
                </rect>
                {% load layers_visibility %}
                {% for layer, markers in markers_by_layer.items %}
                    <g class="layer_markers layer-{{ layer.title }}">
                        <defs>
                            <g id="marker_layer-{{ layer.title }}">
                                {{ layer.kind.svg_figures|safe }}
                            </g>
                        </defs>
                        {% for marker in markers %}
                            <use href="#marker_layer-{{ layer.title }}"
                                 x="{{ marker.pos_x }}" y="{{ marker.pos_y }}"
                                 transform="rotate({{ marker.rotation }} {{ marker.pos_x }} {{ marker.pos_y }})"
                                 class="plan_marker"
                                 data-marker-uid="{{ marker.uid }}"
                                 data-layer-title="{{ layer.title }}"></use>
                            <g class="marker_group {{ marker.correct|yesno:'marker_correct,marker_wrong,' }}">
                                <line class="marker_link" data-mr="{{ marker.CIRCLE_RADIUS }}"
                                      data-cx="{{ marker.pos_x }}" data-cy="{{ marker.pos_y }}"
                                      x1="{{ marker.pos_x }}" y1="{{ marker.pos_y }}"
                                      x2="{{ marker.pos_x }}" y2="{{ marker.pos_y }}"></line>
                                <circle cx="{{ marker.pos_x }}" cy="{{ marker.pos_y }}"
                                        r="{{ marker.CIRCLE_RADIUS }}"
                                        class="marker_circle" id="marker_circle-{{ marker.uid }}"
                                        data-marker-uid="{{ marker.uid }}" data-layer-title="{{ layer.title }}"></circle>
                                <circle cx="{{ marker.pos_x }}" cy="{{ marker.pos_y }}"
                                        r="1"
                                        transform="translate({{ marker.COMMENT_MARK_PADDING }}, -{{ marker.COMMENT_MARK_PADDING }})"
                                        class="marker_comment_mark {{ marker.has_comment|yesno:'marker_has_comment,' }}"></circle>
                            </g>
                        {% endfor %}
                    </g>
                {% endfor %}
            </g>
        </svg>
        <div id="project-page-messages-container">
            <div style="position: relative">
                {% for layer, markers in markers_by_layer.items %}
                    <div class="layer_messages layer-{{ layer.title }}"></div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
<div class="map_controls">
    <div>
        <svg width="32" height="32">
            <g id="map_control_plus" class="map_control">
                <circle r="15" cx="16" cy="16"></circle>
                <line x1="6" y1="16" x2="26" y2="16" style="stroke-width: 2;"></line>
                <line x1="16" y1="6" x2="16" y2="26" style="stroke-width: 2;"></line>
            </g>
        </svg>
    </div>
    <div>
        <svg width="32" height="32">
            <g id="map_control_minus" class="map_control disabled">
                <circle r="15" cx="16" cy="16"></circle>
                <line x1="6" y1="16" x2="26" y2="16" style="stroke-width: 2;"></line>
            </g>
        </svg>
    </div>
</div>
